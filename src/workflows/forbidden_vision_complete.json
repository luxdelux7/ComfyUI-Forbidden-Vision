{"id":"fd3f6f5d-db0e-46a0-8a06-cc9ef6568aba","revision":0,"last_node_id":158,"last_link_id":50432,"nodes":[{"id":55,"type":"Anything Everywhere","pos":[-70,-300],"size":[172.1890625,46],"flags":{"collapsed":true},"order":16,"mode":0,"inputs":[{"color_on":"","label":"COMBO","localized_name":"anything","name":"anything","shape":7,"type":"COMBO","link":2908},{"label":"anything","name":"anything11","type":"*","link":null}],"outputs":[],"properties":{"cnr_id":"cg-use-everywhere","ver":"7.5.1","Node name for S&R":"Anything Everywhere","ue_properties":{"version":"7.5.1","group_restricted":0,"color_restricted":0,"widget_ue_connectable":{},"input_ue_unconnectable":{},"title_regex":null,"input_regex":"scheduler","group_regex":null,"title_regex_invert":false,"input_regex_invert":false,"group_regex_invert":false,"repeated_type_rule":0,"string_to_combo":0,"next_input_index":11}},"widgets_values":[],"shape":4},{"id":17,"type":"Anything Everywhere","pos":[-410,270],"size":[172.1890625,46],"flags":{"collapsed":true},"order":18,"mode":0,"inputs":[{"color_on":"#FFA931","label":"CONDITIONING","localized_name":"anything","name":"anything","shape":7,"type":"CONDITIONING","link":20},{"label":"anything","name":"anything11","type":"*","link":null}],"outputs":[],"properties":{"cnr_id":"cg-use-everywhere","ver":"7.5.1","Node name for S&R":"Anything Everywhere","ue_properties":{"version":"7.5.1","group_restricted":0,"color_restricted":0,"widget_ue_connectable":{},"input_ue_unconnectable":{},"title_regex":null,"input_regex":"negative","group_regex":null,"title_regex_invert":false,"input_regex_invert":false,"group_regex_invert":false,"repeated_type_rule":0,"string_to_combo":0,"next_input_index":11}},"widgets_values":[],"shape":4},{"id":18,"type":"Seed (rgthree)","pos":[1040,-230],"size":[315,130],"flags":{},"order":0,"mode":4,"inputs":[],"outputs":[{"dir":4,"name":"SEED","shape":3,"type":"INT","links":[10183]}],"properties":{"cnr_id":"rgthree-comfy","ver":"0fb1e239a903e93ef626a8c20589b38f46e39dff","randomMax":1125899906842624,"randomMin":0,"ue_properties":{"widget_ue_connectable":{},"version":"7.5.1","input_ue_unconnectable":{}}},"widgets_values":[704843667324886,"","",""],"color":"#223","bgcolor":"#335","shape":4},{"id":60,"type":"PreviewImage","pos":[1050,420],"size":[620,1030],"flags":{},"order":28,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":10182}],"outputs":[],"title":"2nd pass preview","properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[],"shape":4},{"id":40,"type":"PreviewImage","pos":[290,420],"size":[620,1030],"flags":{},"order":26,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":12278}],"outputs":[],"title":"Refiner preview","properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[],"shape":4},{"id":33,"type":"LoadImage","pos":[-840,-700],"size":[274.080078125,314.0000000000001],"flags":{},"order":1,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1168]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":["example.png","image"],"shape":4},{"id":20,"type":"PreviewImage","pos":[2240,430],"size":[390,620],"flags":{},"order":29,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":33873}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[],"shape":4},{"id":150,"type":"SaveImage","pos":[3480,-180],"size":[620,910],"flags":{},"order":31,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":49248},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"SaveImage","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":["forbidden_vision"],"shape":4},{"id":157,"type":"MarkdownNote","pos":[1040,-40],"size":[300,350],"flags":{},"order":3,"mode":4,"inputs":[],"outputs":[],"title":"Tips","properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.5.1","input_ue_unconnectable":{}}},"widgets_values":["## 2nd Pass Settings\n\nA basic scheduler for the 2nd pass.\n\n**Denoise 0.10 - 0.20** ‚Äî Keeps most of the previous image's look and structure\n\n**Denoise 0.30 - 0.40** ‚Äî Helps fix various details in the image like fingers\n\nHigher denoise = more changes to the image."],"color":"#432","bgcolor":"#653","shape":4},{"id":98,"type":"MarkdownNote","pos":[610,-220],"size":[300,470],"flags":{},"order":4,"mode":4,"inputs":[],"outputs":[],"title":"Tips","properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.5.1","input_ue_unconnectable":{}}},"widgets_values":["## Upscaling Before 2nd Pass\n\nSlightly upscaling the image before the 2nd pass usually gives you better final results.\n\n**Recommended:** Use a fast 2x upscale model like [2xBHI_small_realplksr_small_pretrain](https://github.com/Phhofm/models/releases/download/2xBHI_small_realplksr_small_pretrain/2xBHI_small_realplksr_small_pretrain.pth)\n\n**Alternative:** Use the basic built-in upscaling without a model.\n\n---\n\n## Refiner Settings\n\nFeel free to go higher with **auto_tone** and **ai_colors** if the provided settings are too conservative, especially if you have 2nd pass enabled‚Äîthe additional sampling will further balance the image out."],"color":"#432","bgcolor":"#653","shape":4},{"id":12,"type":"Anything Everywhere","pos":[-40,-930],"size":[172.1890625,126],"flags":{"collapsed":true},"order":21,"mode":0,"inputs":[{"color_on":"#B39DDB","label":"MODEL","localized_name":"anything","name":"anything","shape":7,"type":"MODEL","link":894},{"color_on":"#FFD500","label":"CLIP","name":"anything11","type":"CLIP","link":895},{"color_on":"#FF6E6E","label":"VAE","name":"anything12","type":"VAE","link":8},{"label":"anything","name":"anything15","type":"*","link":null}],"outputs":[],"properties":{"cnr_id":"cg-use-everywhere","ver":"7.5.1","Node name for S&R":"Anything Everywhere","ue_properties":{"version":"7.5.1","group_restricted":0,"color_restricted":0,"widget_ue_connectable":{},"input_ue_unconnectable":{},"title_regex":null,"input_regex":null,"group_regex":null,"title_regex_invert":false,"input_regex_invert":false,"group_regex_invert":false,"repeated_type_rule":0,"string_to_combo":0,"next_input_index":15}},"widgets_values":[],"shape":4},{"id":35,"type":"AIO_Preprocessor","pos":[-840,-330],"size":[270,82],"flags":{},"order":14,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":1168},{"localized_name":"preprocessor","name":"preprocessor","shape":7,"type":"COMBO","widget":{"name":"preprocessor"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1169]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1.1.3","Node name for S&R":"AIO_Preprocessor","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":["none",512],"shape":4},{"id":34,"type":"ControlNetLoader","pos":[-840,-190],"size":[270,58],"flags":{"collapsed":false},"order":6,"mode":4,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[1059]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"ControlNetLoader","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[null],"shape":4},{"id":31,"type":"ControlNetApplyAdvanced","pos":[-520,-690],"size":[270,186],"flags":{},"order":20,"mode":4,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":1059},{"localized_name":"image","name":"image","type":"IMAGE","link":1169},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[983]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[984]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"ControlNetApplyAdvanced","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[0.8,0,0.35],"shape":4},{"id":54,"type":"Anything Everywhere","pos":[-70,-340],"size":[172.1890625,66],"flags":{"collapsed":true},"order":15,"mode":0,"inputs":[{"color_on":"","label":"COMBO","localized_name":"anything","name":"anything","shape":7,"type":"COMBO","link":2906},{"label":"anything","name":"anything12","type":"*","link":null}],"outputs":[],"properties":{"cnr_id":"cg-use-everywhere","ver":"7.5.1","Node name for S&R":"Anything Everywhere","ue_properties":{"version":"7.5.1","group_restricted":0,"color_restricted":0,"widget_ue_connectable":{},"input_ue_unconnectable":{},"title_regex":null,"input_regex":"sampler*","group_regex":null,"title_regex_invert":false,"input_regex_invert":false,"group_regex_invert":false,"repeated_type_rule":0,"string_to_combo":0,"next_input_index":12}},"widgets_values":[],"shape":4},{"id":53,"type":"SamplerSchedulerSettings","pos":[-120,-370],"size":[290,102],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null}],"outputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","links":[2906]},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","links":[2908]}],"properties":{"aux_id":"luxdelux7/ComfyUI-Forbidden-Vision","ver":"f3d5cfbb9f978d1da3bbe74f11de6aba96abeb0b","Node name for S&R":"SamplerSchedulerSettings","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":["euler_ancestral","sgm_uniform"],"color":"#432","bgcolor":"#653","shape":4},{"id":30,"type":"Power Lora Loader (rgthree)","pos":[-120,-810],"size":[290,370],"flags":{},"order":17,"mode":0,"inputs":[{"dir":3,"name":"model","type":"MODEL","link":913},{"dir":3,"name":"clip","type":"CLIP","link":914}],"outputs":[{"dir":4,"name":"MODEL","shape":3,"type":"MODEL","links":[894]},{"dir":4,"name":"CLIP","shape":3,"type":"CLIP","links":[895]}],"properties":{"cnr_id":"rgthree-comfy","ver":"eadc24ecc8bfc3c80fcc50724c0ebe74489f255b","Show Strengths":"Single Strength","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[{},{"type":"PowerLoraLoaderHeaderWidget"},{},""],"color":"#432","bgcolor":"#653","shape":4},{"id":9,"type":"CLIPTextEncode","pos":[-880,320],"size":[710,240],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[20]}],"title":"negative","properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{"text":true},"version":"7.5.1","input_ue_unconnectable":{}}},"widgets_values":[""],"color":"#322","bgcolor":"#533","shape":4},{"id":16,"type":"Anything Everywhere","pos":[-400,30],"size":[172.1890625,46],"flags":{"collapsed":true},"order":19,"mode":0,"inputs":[{"color_on":"#FFA931","label":"CONDITIONING","localized_name":"anything","name":"anything","shape":7,"type":"CONDITIONING","link":19},{"label":"anything","name":"anything11","type":"*","link":null}],"outputs":[],"properties":{"cnr_id":"cg-use-everywhere","ver":"7.5.1","Node name for S&R":"Anything Everywhere","ue_properties":{"version":"7.5.1","group_restricted":0,"color_restricted":0,"widget_ue_connectable":{},"input_ue_unconnectable":{},"title_regex":null,"input_regex":"positive","group_regex":null,"title_regex_invert":false,"input_regex_invert":false,"group_regex_invert":false,"repeated_type_rule":0,"string_to_combo":0,"next_input_index":11}},"widgets_values":[],"shape":4},{"id":8,"type":"CLIPTextEncode","pos":[-880,0],"size":[710,270],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[19]}],"title":"positive","properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{"text":true},"version":"7.5.1","input_ue_unconnectable":{}}},"widgets_values":["1girl, rainbow hair, looking at viwer, jeans, spiked jacket, shirt, library, particles, volumetric lighting, cinematic, dutch angle"],"color":"#232","bgcolor":"#353","shape":4},{"id":29,"type":"PreviewImage","pos":[-450,680],"size":[670,980],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":825}],"outputs":[],"title":"1st pass preview","properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[],"shape":4},{"id":97,"type":"MarkdownNote","pos":[-870,680],"size":[370,400],"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[],"title":"Welcome to Forbidden Vision","properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.5.1","input_ue_unconnectable":{}}},"widgets_values":["# Welcome to Forbidden Vision\n\n**Nice and easy.**\n\nUse the **Fast Group Bypasser** to work iteratively‚Äîenable one group at a time:\n\nüèóÔ∏è **Builder** ‚Äî Find your image structure and composition\n\nüíé **Refiner** ‚Äî Enhance light, colors and details etc.\n\nüé® **Second Pass** ‚Äî Refine with additional sampling\n\nüéØ **Face Fix** ‚Äî Perfect any remaining face issues\n\n‚ú® **Final Polish** ‚Äî Apply finishing touches and/or upscale\n\nüíæ **Save** ‚Äî Export your final image\n\n---\n\nStart with just the first pass enabled, then turn on each group as you refine your result."],"color":"#223","bgcolor":"#335","shape":4},{"id":32,"type":"Fast Groups Bypasser (rgthree)","pos":[260,-610],"size":[320,250],"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":[]}],"properties":{"matchColors":"","matchTitle":"","showNav":true,"showAllGraphs":true,"sort":"position","customSortAlphabet":"","toggleRestriction":"default","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"color":"#323","bgcolor":"#535","shape":4},{"id":6,"type":"Seed (rgthree)","pos":[-120,-200],"size":[315,130],"flags":{},"order":13,"mode":0,"inputs":[],"outputs":[{"dir":4,"name":"SEED","shape":3,"type":"INT","links":[603]}],"properties":{"cnr_id":"rgthree-comfy","ver":"0fb1e239a903e93ef626a8c20589b38f46e39dff","randomMax":1125899906842624,"randomMin":0,"ue_properties":{"widget_ue_connectable":{},"version":"7.5.1","input_ue_unconnectable":{}}},"widgets_values":[577888167817092,"","",""],"color":"#223","bgcolor":"#335","shape":4},{"id":158,"type":"PreviewImage","pos":[2870,440],"size":[390,620],"flags":{},"order":32,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":50431}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[],"shape":4},{"id":111,"type":"LatentRefiner","pos":[2880,-100],"size":[276.84140625,482],"flags":{},"order":30,"mode":4,"inputs":[{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":39372},{"localized_name":"enable_upscale","name":"enable_upscale","type":"BOOLEAN","widget":{"name":"enable_upscale"},"link":null},{"localized_name":"upscale_model","name":"upscale_model","type":"COMBO","widget":{"name":"upscale_model"},"link":null},{"localized_name":"upscale_factor","name":"upscale_factor","type":"FLOAT","widget":{"name":"upscale_factor"},"link":null},{"localized_name":"enable_auto_tone","name":"enable_auto_tone","type":"BOOLEAN","widget":{"name":"enable_auto_tone"},"link":null},{"localized_name":"auto_tone_strength","name":"auto_tone_strength","type":"FLOAT","widget":{"name":"auto_tone_strength"},"link":null},{"localized_name":"ai_colors","name":"ai_colors","type":"BOOLEAN","widget":{"name":"ai_colors"},"link":null},{"localized_name":"ai_colors_strength","name":"ai_colors_strength","type":"FLOAT","widget":{"name":"ai_colors_strength"},"link":null},{"localized_name":"ai_details","name":"ai_details","type":"BOOLEAN","widget":{"name":"ai_details"},"link":null},{"localized_name":"ai_details_strength","name":"ai_details_strength","type":"FLOAT","widget":{"name":"ai_details_strength"},"link":null},{"localized_name":"ai_relight","name":"ai_relight","type":"BOOLEAN","widget":{"name":"ai_relight"},"link":null},{"localized_name":"ai_relight_strength","name":"ai_relight_strength","type":"FLOAT","widget":{"name":"ai_relight_strength"},"link":null},{"localized_name":"ai_enable_dof","name":"ai_enable_dof","type":"BOOLEAN","widget":{"name":"ai_enable_dof"},"link":null},{"localized_name":"ai_dof_strength","name":"ai_dof_strength","type":"FLOAT","widget":{"name":"ai_dof_strength"},"link":null},{"localized_name":"ai_dof_focus_depth","name":"ai_dof_focus_depth","type":"FLOAT","widget":{"name":"ai_dof_focus_depth"},"link":null},{"localized_name":"ai_depth_model","name":"ai_depth_model","type":"COMBO","widget":{"name":"ai_depth_model"},"link":null},{"localized_name":"use_tiled_vae","name":"use_tiled_vae","type":"BOOLEAN","widget":{"name":"use_tiled_vae"},"link":null},{"localized_name":"tile_size","name":"tile_size","type":"INT","widget":{"name":"tile_size"},"link":null}],"outputs":[{"localized_name":"refined_latent","name":"refined_latent","type":"LATENT","links":null},{"localized_name":"refined_image_preview","name":"refined_image_preview","type":"IMAGE","links":[49248,50431]}],"properties":{"aux_id":"luxdelux7/ComfyUI-Forbidden-Vision","ver":"63dc45629d49189e49eb2eef0c31f9108f62ee2d","Node name for S&R":"LatentRefiner","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[false,"2xBHI_small_realplksr_small_pretrain.pth",2,true,0.2,true,0.2,false,1,false,1,false,0.4,0.75,"V2-Small",false,512],"shape":4},{"id":7,"type":"CheckpointLoaderSimple","pos":[-120,-970],"size":[270,98],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[913]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[914]},{"localized_name":"VAE","name":"VAE","type":"VAE","links":[8]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.75","Node name for S&R":"CheckpointLoaderSimple","ue_properties":{"widget_ue_connectable":{"ckpt_name":true},"version":"7.5.1","input_ue_unconnectable":{}}},"widgets_values":["novaAnimeXL_ilV140.safetensors"],"color":"#432","bgcolor":"#653","shape":4},{"id":121,"type":"ForbiddenVisionFaceProcessorIntegrated","pos":[1790,-30],"size":[400,1092],"flags":{},"order":27,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"vae","name":"vae","type":"VAE","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":50432},{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":33872},{"localized_name":"clip","name":"clip","shape":7,"type":"CLIP","link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg_scale","name":"cfg_scale","type":"FLOAT","widget":{"name":"cfg_scale"},"link":null},{"localized_name":"sampler","name":"sampler","type":"COMBO","widget":{"name":"sampler"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise_strength","name":"denoise_strength","type":"FLOAT","widget":{"name":"denoise_strength"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":49295},{"localized_name":"face_selection","name":"face_selection","type":"INT","widget":{"name":"face_selection"},"link":null},{"localized_name":"detection_confidence","name":"detection_confidence","type":"FLOAT","widget":{"name":"detection_confidence"},"link":null},{"localized_name":"manual_rotation","name":"manual_rotation","type":"COMBO","widget":{"name":"manual_rotation"},"link":null},{"localized_name":"processing_resolution","name":"processing_resolution","type":"INT","widget":{"name":"processing_resolution"},"link":null},{"localized_name":"enable_pre_upscale","name":"enable_pre_upscale","type":"BOOLEAN","widget":{"name":"enable_pre_upscale"},"link":null},{"localized_name":"upscaler_model","name":"upscaler_model","type":"COMBO","widget":{"name":"upscaler_model"},"link":null},{"localized_name":"crop_padding","name":"crop_padding","type":"FLOAT","widget":{"name":"crop_padding"},"link":null},{"localized_name":"face_positive_prompt","name":"face_positive_prompt","type":"STRING","widget":{"name":"face_positive_prompt"},"link":null},{"localized_name":"replace_positive_prompt","name":"replace_positive_prompt","type":"BOOLEAN","widget":{"name":"replace_positive_prompt"},"link":null},{"localized_name":"face_negative_prompt","name":"face_negative_prompt","type":"STRING","widget":{"name":"face_negative_prompt"},"link":null},{"localized_name":"replace_negative_prompt","name":"replace_negative_prompt","type":"BOOLEAN","widget":{"name":"replace_negative_prompt"},"link":null},{"localized_name":"exclusions","name":"exclusions","type":"STRING","widget":{"name":"exclusions"},"link":null},{"localized_name":"blend_softness","name":"blend_softness","type":"INT","widget":{"name":"blend_softness"},"link":null},{"localized_name":"mask_expansion","name":"mask_expansion","type":"INT","widget":{"name":"mask_expansion"},"link":null},{"localized_name":"sampling_mask_blur_size","name":"sampling_mask_blur_size","type":"INT","widget":{"name":"sampling_mask_blur_size"},"link":null},{"localized_name":"sampling_mask_blur_strength","name":"sampling_mask_blur_strength","type":"FLOAT","widget":{"name":"sampling_mask_blur_strength"},"link":null},{"localized_name":"enable_color_correction","name":"enable_color_correction","type":"BOOLEAN","widget":{"name":"enable_color_correction"},"link":null},{"localized_name":"enable_segmentation","name":"enable_segmentation","type":"BOOLEAN","widget":{"name":"enable_segmentation"},"link":null},{"localized_name":"enable_differential_diffusion","name":"enable_differential_diffusion","type":"BOOLEAN","widget":{"name":"enable_differential_diffusion"},"link":null},{"localized_name":"enable_lightness_rescue","name":"enable_lightness_rescue","type":"BOOLEAN","widget":{"name":"enable_lightness_rescue"},"link":null},{"localized_name":"enable_final_refinement","name":"enable_final_refinement","type":"BOOLEAN","widget":{"name":"enable_final_refinement"},"link":null}],"outputs":[{"localized_name":"final_image","name":"final_image","type":"IMAGE","links":[33873,39372]},{"localized_name":"processed_face","name":"processed_face","type":"IMAGE","links":[]},{"localized_name":"side_by_side_comparison","name":"side_by_side_comparison","type":"IMAGE","links":[]},{"localized_name":"final_mask","name":"final_mask","type":"MASK","links":null}],"properties":{"aux_id":"luxdelux7/ComfyUI-Forbidden-Vision","ver":"63dc45629d49189e49eb2eef0c31f9108f62ee2d","Node name for S&R":"ForbiddenVisionFaceProcessorIntegrated","ue_properties":{"widget_ue_connectable":{"cfg_scale":false,"sampler":true,"scheduler":true},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[12,3,"euler_ancestral","sgm_uniform",0.3,603113309142520,"fixed",0,0.8,"None",1024,true,"Fast 4x (Lanczos)",1.6,"",false,"",false,"",8,2,21,1,true,true,true,true,true],"shape":4},{"id":19,"type":"Seed (rgthree)","pos":[1790,-220],"size":[315,130],"flags":{},"order":2,"mode":4,"inputs":[],"outputs":[{"dir":4,"name":"SEED","shape":3,"type":"INT","links":[49295]}],"properties":{"cnr_id":"rgthree-comfy","ver":"0fb1e239a903e93ef626a8c20589b38f46e39dff","randomMax":1125899906842624,"randomMin":0,"ue_properties":{"widget_ue_connectable":{},"version":"7.5.1","input_ue_unconnectable":{}}},"widgets_values":[68965737948743,"","",""],"color":"#223","bgcolor":"#335","shape":4},{"id":153,"type":"MarkdownNote","pos":[2270,-200],"size":[370,520],"flags":{},"order":5,"mode":4,"inputs":[],"outputs":[],"title":"Tips","properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.5.1","input_ue_unconnectable":{}}},"widgets_values":["The default values should already give you a much more polished final face.\n\n## Upscaling\n\nUsing a 4x fast upscale model can give you even better details. For example:\n\n[4x-UltraSharpV2_Lite.pth](https://huggingface.co/Kim2091/UltraSharpV2/blob/main/4x-UltraSharpV2_Lite.pth)\n\n[4xBHI_realplksr_dysample_real.pth](https://github.com/Phhofm/models/releases/download/4xbhi_realplksr/4xBHI_realplksr_dysample_real.pth)\n\n\n---\n\n## Higher Denoise\n\nIf you decide to use a much higher denoise, you might also need to adjust the **number of steps** and **CFG** for better quality, as you are introducing more new sampling to the image. But even the default values should be good‚Äîit depends on your model and if any LORAs are used.\n\n---\n\n## Prompt Adjustments\n\nTry adding things to the **positive** or **negative** inputs (and use the **replace toggles** if you want to completely ignore your initial image generation prompts).\n\nFor example, even at denoise 0.3 you can usually change eye colors, or force the model to remove teeth."],"color":"#432","bgcolor":"#653","shape":4},{"id":70,"type":"LatentRefiner","pos":[300,-220],"size":[276.84140625,482],"flags":{},"order":23,"mode":4,"inputs":[{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":12277},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":null},{"localized_name":"enable_upscale","name":"enable_upscale","type":"BOOLEAN","widget":{"name":"enable_upscale"},"link":null},{"localized_name":"upscale_model","name":"upscale_model","type":"COMBO","widget":{"name":"upscale_model"},"link":null},{"localized_name":"upscale_factor","name":"upscale_factor","type":"FLOAT","widget":{"name":"upscale_factor"},"link":null},{"localized_name":"enable_auto_tone","name":"enable_auto_tone","type":"BOOLEAN","widget":{"name":"enable_auto_tone"},"link":null},{"localized_name":"auto_tone_strength","name":"auto_tone_strength","type":"FLOAT","widget":{"name":"auto_tone_strength"},"link":null},{"localized_name":"ai_colors","name":"ai_colors","type":"BOOLEAN","widget":{"name":"ai_colors"},"link":null},{"localized_name":"ai_colors_strength","name":"ai_colors_strength","type":"FLOAT","widget":{"name":"ai_colors_strength"},"link":null},{"localized_name":"ai_details","name":"ai_details","type":"BOOLEAN","widget":{"name":"ai_details"},"link":null},{"localized_name":"ai_details_strength","name":"ai_details_strength","type":"FLOAT","widget":{"name":"ai_details_strength"},"link":null},{"localized_name":"ai_relight","name":"ai_relight","type":"BOOLEAN","widget":{"name":"ai_relight"},"link":null},{"localized_name":"ai_relight_strength","name":"ai_relight_strength","type":"FLOAT","widget":{"name":"ai_relight_strength"},"link":null},{"localized_name":"ai_enable_dof","name":"ai_enable_dof","type":"BOOLEAN","widget":{"name":"ai_enable_dof"},"link":null},{"localized_name":"ai_dof_strength","name":"ai_dof_strength","type":"FLOAT","widget":{"name":"ai_dof_strength"},"link":null},{"localized_name":"ai_dof_focus_depth","name":"ai_dof_focus_depth","type":"FLOAT","widget":{"name":"ai_dof_focus_depth"},"link":null},{"localized_name":"ai_depth_model","name":"ai_depth_model","type":"COMBO","widget":{"name":"ai_depth_model"},"link":null},{"localized_name":"use_tiled_vae","name":"use_tiled_vae","type":"BOOLEAN","widget":{"name":"use_tiled_vae"},"link":null},{"localized_name":"tile_size","name":"tile_size","type":"INT","widget":{"name":"tile_size"},"link":null}],"outputs":[{"localized_name":"refined_latent","name":"refined_latent","type":"LATENT","links":[13527]},{"localized_name":"refined_image_preview","name":"refined_image_preview","type":"IMAGE","links":[12278]}],"properties":{"aux_id":"luxdelux7/ComfyUI-Forbidden-Vision","ver":"f3d5cfbb9f978d1da3bbe74f11de6aba96abeb0b","Node name for S&R":"LatentRefiner","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[true,"2xBHI_small_realplksr_small_pretrain.pth",1.2,true,0.5,true,0.5,true,1,false,0.5,false,0.5,0.75,"V2-Small",false,512],"shape":4},{"id":61,"type":"ForbiddenVisionRebuilder","pos":[1370,-230],"size":[291.634375,542],"flags":{},"order":25,"mode":4,"inputs":[{"localized_name":"latent","name":"latent","type":"LATENT","link":13527},{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":10183},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[33872]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[10182,50432]}],"properties":{"aux_id":"luxdelux7/ComfyUI-Forbidden-Vision","ver":"f3d5cfbb9f978d1da3bbe74f11de6aba96abeb0b","Node name for S&R":"ForbiddenVisionRebuilder","ue_properties":{"widget_ue_connectable":{"sampler_name":true,"scheduler":true},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[142315246302887,"fixed",10,2,0.25,"euler_ancestral","sgm_uniform"],"color":"#232","bgcolor":"#353","shape":4},{"id":28,"type":"LatentBuilder","pos":[-110,0],"size":[275.2896484375,570],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":983},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":984},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"self_correction","name":"self_correction","type":"BOOLEAN","widget":{"name":"self_correction"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":603},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"resolution_preset","name":"resolution_preset","type":"COMBO","widget":{"name":"resolution_preset"},"link":null},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[12277]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[825]}],"properties":{"aux_id":"luxdelux7/ComfyUI-Forbidden-Vision","ver":"f3d5cfbb9f978d1da3bbe74f11de6aba96abeb0b","Node name for S&R":"LatentBuilder","ue_properties":{"widget_ue_connectable":{"seed":false,"sampler_name":true,"scheduler":true},"input_ue_unconnectable":{},"version":"7.5.1"}},"widgets_values":[true,0,"fixed",15,6,"euler_ancestral","sgm_uniform","[SDXL] 832x1216 (Portrait 3:4)",1024,1024,1],"color":"#232","bgcolor":"#353","shape":4}],"links":[[8,7,2,12,2,"VAE"],[19,8,0,16,0,"CONDITIONING"],[20,9,0,17,0,"CONDITIONING"],[603,6,0,28,5,"INT"],[825,28,1,29,0,"IMAGE"],[894,30,0,12,0,"MODEL"],[895,30,1,12,1,"CLIP"],[913,7,0,30,0,"MODEL"],[914,7,1,30,1,"CLIP"],[983,31,0,28,1,"CONDITIONING"],[984,31,1,28,2,"CONDITIONING"],[1059,34,0,31,2,"CONTROL_NET"],[1168,33,0,35,0,"IMAGE"],[1169,35,0,31,3,"IMAGE"],[2906,53,0,54,0,"COMBO"],[2908,53,1,55,0,"COMBO"],[10182,61,1,60,0,"IMAGE"],[10183,18,0,61,5,"INT"],[12277,28,0,70,0,"LATENT"],[12278,70,1,40,0,"IMAGE"],[13527,70,0,61,0,"LATENT"],[33872,61,0,121,5,"LATENT"],[33873,121,0,20,0,"IMAGE"],[39372,121,0,111,2,"IMAGE"],[49248,111,1,150,0,"IMAGE"],[49295,19,0,121,12,"INT"],[50431,111,1,158,0,"IMAGE"],[50432,61,1,121,4,"IMAGE"]],"groups":[{"id":1,"title":"ControlNet","bounding":[-880,-790,700,720],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Fixer","bounding":[1760,-310,970,1720],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"2nd Pass","bounding":[1020,-320,670,2000],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Refiner","bounding":[260,-330,690,2000],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"Save","bounding":[3420,-300,770,1180],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"FInal Polish and Upscale","bounding":[2800,-300,560,1700],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.021574287271061,"offset":[516.1102044935006,367.93031806746905]},"ue_links":[{"downstream":31,"downstream_slot":0,"upstream":"8","upstream_slot":0,"controller":16,"type":"CONDITIONING"},{"downstream":31,"downstream_slot":1,"upstream":"9","upstream_slot":0,"controller":17,"type":"CONDITIONING"},{"downstream":31,"downstream_slot":4,"upstream":"7","upstream_slot":2,"controller":12,"type":"VAE"},{"downstream":9,"downstream_slot":0,"upstream":"30","upstream_slot":1,"controller":12,"type":"CLIP"},{"downstream":8,"downstream_slot":0,"upstream":"30","upstream_slot":1,"controller":12,"type":"CLIP"},{"downstream":111,"downstream_slot":1,"upstream":"7","upstream_slot":2,"controller":12,"type":"VAE"},{"downstream":121,"downstream_slot":0,"upstream":"30","upstream_slot":0,"controller":12,"type":"MODEL"},{"downstream":121,"downstream_slot":1,"upstream":"7","upstream_slot":2,"controller":12,"type":"VAE"},{"downstream":121,"downstream_slot":2,"upstream":"8","upstream_slot":0,"controller":16,"type":"CONDITIONING"},{"downstream":121,"downstream_slot":3,"upstream":"9","upstream_slot":0,"controller":17,"type":"CONDITIONING"},{"downstream":121,"downstream_slot":6,"upstream":"30","upstream_slot":1,"controller":12,"type":"CLIP"},{"downstream":121,"downstream_slot":9,"upstream":"53","upstream_slot":0,"controller":54,"type":"COMBO"},{"downstream":121,"downstream_slot":10,"upstream":"53","upstream_slot":1,"controller":55,"type":"COMBO"},{"downstream":70,"downstream_slot":1,"upstream":"7","upstream_slot":2,"controller":12,"type":"VAE"},{"downstream":61,"downstream_slot":1,"upstream":"30","upstream_slot":0,"controller":12,"type":"MODEL"},{"downstream":61,"downstream_slot":2,"upstream":"8","upstream_slot":0,"controller":16,"type":"CONDITIONING"},{"downstream":61,"downstream_slot":3,"upstream":"9","upstream_slot":0,"controller":17,"type":"CONDITIONING"},{"downstream":61,"downstream_slot":4,"upstream":"7","upstream_slot":2,"controller":12,"type":"VAE"},{"downstream":61,"downstream_slot":9,"upstream":"53","upstream_slot":0,"controller":54,"type":"COMBO"},{"downstream":61,"downstream_slot":10,"upstream":"53","upstream_slot":1,"controller":55,"type":"COMBO"},{"downstream":28,"downstream_slot":0,"upstream":"30","upstream_slot":0,"controller":12,"type":"MODEL"},{"downstream":28,"downstream_slot":3,"upstream":"7","upstream_slot":2,"controller":12,"type":"VAE"},{"downstream":28,"downstream_slot":8,"upstream":"53","upstream_slot":0,"controller":54,"type":"COMBO"},{"downstream":28,"downstream_slot":9,"upstream":"53","upstream_slot":1,"controller":55,"type":"COMBO"}],"links_added_by_ue":[50389,50390,50391,50392,50393,50394,50395,50396,50397,50398,50399,50400,50401,50402,50403,50404,50405,50406,50407,50408,50409,50410,50411,50412,50413,50414,50415,50416,50417,50418,50419,50420,50421,50422,50423,50424,50425,50426,50427,50428,50429,50430]},"version":0.4}